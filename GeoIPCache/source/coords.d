import std.range;
import std.algorithm.comparison;

public struct country_coords
{
    string code = "";
    double lon = 0.0;
    double lat = 0.0;

    bool opEquals()(auto ref const country_coords b) const
    {
        return equal(this.code, b.code);
    }
    int opCmp(ref const country_coords b) const
    {
        return cmp(this.code, b.code);
    }
    bool opEquals()(string b) const
    {
        return equal(this.code, b);
    }
    int opCmp(string b) const
    {
        return cmp(this.code, b);
    }
}

public enum : country_coords {
AD = country_coords("AD", 1.5732033, 42.5407167),
AE = country_coords("AE", 44.6736646, 40.7696272),
AF = country_coords("AF", 66.2385139, 33.7680065),
AG = country_coords("AG", 8.1948321, 47.412396),
AI = country_coords("AI", -63.0750234, 18.1954947),
AL = country_coords("AL", -86.8295337, 33.2588817),
AM = country_coords("AM", 44.6736646, 40.7696272),
AO = country_coords("AO", 13.199959, 47.2000338),
AQ = country_coords("AQ", 34.37824, -82.1081822),
AR = country_coords("AR", -64.9672817, -34.9964963),
AS = country_coords("AS", 25.4856617, 42.6073975),
AT = country_coords("AT", 13.199959, 47.2000338),
AU = country_coords("AU", 134.755, -24.7761086),
AW = country_coords("AW", 124.0299311, 10.8365729),
AX = country_coords("AX", 8.7731882, 53.3553463),
AZ = country_coords("AZ", 47.7872508, 40.3936294),
BA = country_coords("BA", 2.3514992, 48.8566101),
BB = country_coords("BB", 13.2461296, 52.8455492),
BD = country_coords("BD", 90.2932426, 24.4768783),
BE = country_coords("BE", 4.66696, 50.6407351),
BF = country_coords("BF", -1.6880314, 12.0753083),
BG = country_coords("BG", 25.4856617, 42.6073975),
BH = country_coords("BH", -43.9450948, -19.9227318),
BI = country_coords("BI", 4.66696, 50.6407351),
BJ = country_coords("BJ", 2.2584408, 9.5293472),
BL = country_coords("BL", 7.6588333, 47.5092938),
BM = country_coords("BM", -64.7603583, 32.3018217),
BN = country_coords("BN", 114.5653908, 4.4137155),
BO = country_coords("BO", -64.9912286, -17.0568696),
BQ = country_coords("BQ", 54.448222, 36.2109553),
BR = country_coords("BR", -53.2, -10.3333333),
BS = country_coords("BS", -78.0000547, 24.7736546),
BT = country_coords("BT", 90.5119273, 27.549511),
BV = country_coords("BV", -90.3139743, 15.1009234),
BW = country_coords("BW", 9.1949534, 48.6296972),
BY = country_coords("BY", 27.6971358, 53.4250605),
BZ = country_coords("BZ", 11.2296438654946, 46.65596895),
CA = country_coords("CA", -107.9917071, 61.0666922),
CC = country_coords("CC", 96.8301442, -12.1691894),
CD = country_coords("CD", 23.8222636, -2.9814344),
CF = country_coords("CF", 19.9981227, 7.0323598),
CG = country_coords("CG", 15.6419155, -0.7264327),
CH = country_coords("CH", 8.2319736, 46.7985624),
CI = country_coords("CI", -5.5679458, 7.9897371),
CK = country_coords("CK", -160.3554851, -16.0492781),
CL = country_coords("CL", -71.3187697, -31.7613365),
CM = country_coords("CM", 13.1535811, 4.6125522),
CN = country_coords("CN", 104.999927, 35.000074),
CO = country_coords("CO", -73.783892, 2.8894434),
CR = country_coords("CR", -84.0739102, 10.2735633),
CU = country_coords("CU", -80.8328748, 23.0131338),
CV = country_coords("CV", -24.0083947, 16.0000552),
CW = country_coords("CW", 7.0640173, 36.071858),
CX = country_coords("CX", 105.64723, -10.4837768),
CY = country_coords("CY", 33.1396402839342, 35.1695632),
CZ = country_coords("CZ", 15.4749544, 49.8167003),
DE = country_coords("DE", 10.4234469, 51.0834196),
DJ = country_coords("DJ", 42.7577845199437, 11.85677545),
DK = country_coords("DK", 10.3333283, 55.670249),
DM = country_coords("DM", -61.3653618, 15.4113138),
DO = country_coords("DO", -70.3028026, 19.0974031),
DZ = country_coords("DZ", 2.9999825, 28.0000272),
EC = country_coords("EC", -79.3666965, -1.3397668),
EE = country_coords("EE", 25.3319078, 58.7523778),
EG = country_coords("EG", 29.2675469, 26.2540493),
EH = country_coords("EH", 112, 31),
ER = country_coords("ER", 37.9999668, 15.9500319),
ES = country_coords("ES", -4.003104, 40.0028028),
ET = country_coords("ET", 38.6521203, 10.2116702),
FI = country_coords("FI", 25.9209164, 63.2467777),
FJ = country_coords("FJ", 179.0122737, -18.1239696),
FK = country_coords("FK", -59.5500387, -51.9666424),
FM = country_coords("FM", 150.1982846, 5.5600565),
FO = country_coords("FO", -6.91612311886872, 61.8489975),
FR = country_coords("FR", 1.8883335, 46.603354),
GA = country_coords("GA", 11.6899699, -0.8999695),
GB = country_coords("GB", -3.2765753, 54.7023545),
GD = country_coords("GD", -61.6904045, 12.1360374),
GE = country_coords("GE", 44.0287382, 41.6809707),
GF = country_coords("GF", 16.7157604310907, 48.38003005),
GG = country_coords("GG", -2.484854, 49.580437),
GH = country_coords("GH", -1.0800271, 8.0300284),
GI = country_coords("GI", -5.33527718348356, 36.10674695),
GL = country_coords("GL", -42.8125967, 77.6192349),
GM = country_coords("GM", -15.4900464, 13.470062),
GN = country_coords("GN", -10.7083587, 10.7226226),
GP = country_coords("GP", 28.0813105, -25.9363439),
GQ = country_coords("GQ", 10.5170357, 1.613172),
GR = country_coords("GR", 21.9877132, 38.9953683),
GS = country_coords("GS", -35.8090698, -54.8432857),
GT = country_coords("GT", -89.8988087, 15.6356088),
GU = country_coords("GU", 139.7021109, 35.6594941),
GW = country_coords("GW", -14.9000214, 12.100035),
GY = country_coords("GY", -58.6416891, 4.8417097),
HK = country_coords("HK", 114.1849161, 22.350627),
HM = country_coords("HM", -117.922545552806, 33.8114902),
HN = country_coords("HN", -84.5978534, 15.0610686),
HR = country_coords("HR", 17.0118954, 45.5643442),
HT = country_coords("HT", -72.3570972, 19.1399952),
HU = country_coords("HU", 19.5060937, 47.1817585),
ID = country_coords("ID", 114.5632032, -4.7993356),
IE = country_coords("IE", -7.9794599, 52.865196),
IL = country_coords("IL", 35.0015196, 30.8760272),
IM = country_coords("IM", 78.6677428, 22.3511148),
IN = country_coords("IN", 78.6677428, 22.3511148),
IO = country_coords("IO", 72.1173961, -6.4157192),
IQ = country_coords("IQ", 44.1749775, 33.0955793),
IR = country_coords("IR", 52.9471344, 32.9407496),
IS = country_coords("IS", -18.1059013, 64.9841821),
IT = country_coords("IT", 12.674297, 42.6384261),
JE = country_coords("JE", -2.1358386, 49.2214561),
JM = country_coords("JM", -77.3947693, 18.1850507),
JO = country_coords("JO", 36.941628, 31.1667049),
JP = country_coords("JP", 139.2394179, 36.5748441),
KE = country_coords("KE", 38.4313975, 1.4419683),
KG = country_coords("KG", 74.724091, 41.5089324),
KH = country_coords("KH", 104.869423, 13.5066394),
KI = country_coords("KI", 173.664834025, 0.306),
KM = country_coords("KM", 44.2832964, -12.2045176),
KN = country_coords("KN", -62.7687277, 17.3462278),
KP = country_coords("KP", 127.0870417, 40.3736611),
KR = country_coords("KR", 127.9408564, 36.5581914),
KW = country_coords("KW", 47.4979476, 29.2733964),
KY = country_coords("KY", -85.1551411, 37.5726028),
KZ = country_coords("KZ", 65.2093197, 47.2286086),
LA = country_coords("LA", 103.378253, 20.0171109),
LB = country_coords("LB", 35.843409, 33.8750629),
LC = country_coords("LC", -60.975036, 13.8250489),
LI = country_coords("LI", 9.5531527, 47.1416307),
LK = country_coords("LK", 80.7038245875, 7.878),
LR = country_coords("LR", -9.3658524, 5.7499721),
LS = country_coords("LS", 28.3350193, -29.6039267),
LT = country_coords("LT", 23.7499997, 55.3500003),
LU = country_coords("LU", 6.1296751, 49.8158683),
LV = country_coords("LV", 24.5999717, 56.8666904),
LY = country_coords("LY", 18.1236723, 26.8234472),
MA = country_coords("MA", 12.4829321, 41.8933203),
MC = country_coords("MC", 7.47616101640138, 43.63071345),
MD = country_coords("MD", -76.9382069, 39.5162234),
ME = country_coords("ME", -100.0000375, 22.5000485),
MF = country_coords("MF", 2.8135265, 41.9752279),
MG = country_coords("MG", -44.1588654, -18.5264844),
MH = country_coords("MH", 76.0554568, 19.531932),
MK = country_coords("MK", 21.7168387, 41.6171214),
ML = country_coords("ML", -2.2900239, 16.3700359),
MM = country_coords("MM", 95.9999652, 17.1750495),
MN = country_coords("MN", -94.6113288, 45.9896587),
MO = country_coords("MO", -92.5617875, 38.7604815),
MP = country_coords("MP", 20.3793521, 49.790952),
MQ = country_coords("MQ", 16.3583421713945, 48.2031942),
MR = country_coords("MR", -9.2399263, 20.2540382),
MS = country_coords("MS", -89.7348497, 32.9715645),
MT = country_coords("MT", 14.4476911, 35.8885993),
MU = country_coords("MU", 57.5703566, -20.2759451),
MV = country_coords("MV", 73.3287853, 4.7064352),
MW = country_coords("MW", 33.9301963, -13.2687204),
MX = country_coords("MX", -100.0000375, 22.5000485),
MY = country_coords("MY", -100.4458825, 39.7837304),
MZ = country_coords("MZ", 34.9144977, -19.302233),
NA = country_coords("NA", 11.5270102892405, 64.574131),
NC = country_coords("NC", -79.0392919, 35.6729639),
NE = country_coords("NE", -99.5873816, 41.7370229),
NF = country_coords("NF", -95.3487721, 29.9923751),
NG = country_coords("NG", 7.9999721, 9.6000359),
NI = country_coords("NI", -84.8700308, 12.3724928),
NL = country_coords("NL", 5.7480821, 52.5001698),
NO = country_coords("NO", 9.0999715, 60.5000209),
NP = country_coords("NP", 84.0917139, 28.1083929),
NR = country_coords("NR", 166.9333009, -0.5249624),
NU = country_coords("NU", -90, 70.0000073),
NZ = country_coords("NZ", 172.8344077, -41.5000831),
OM = country_coords("OM", 57.0036901, 21.0000287),
PA = country_coords("PA", -81.3066246, 8.3096067),
PE = country_coords("PE", -75.0458515, -6.8699697),
PF = country_coords("PF", 8.4668963671286, 49.54527575),
PG = country_coords("PG", 146.051241849312, -6.21004105),
PH = country_coords("PH", 122.160395163807, 12.44249325),
PK = country_coords("PK", 71.247499, 30.3308401),
PL = country_coords("PL", 19.0258159, 52.0977181),
PM = country_coords("PM", 17.9057338, 54.143148),
PN = country_coords("PN", -130.1017823, -25.0657719),
PR = country_coords("PR", 14.446459273258, 50.0596288),
PS = country_coords("PS", 35.162072, 31.649741),
PT = country_coords("PT", -7.8896263, 40.033265),
PW = country_coords("PW", 133.313631, 6.097367),
PY = country_coords("PY", -58.1693445, -23.3165935),
QA = country_coords("QA", 51.2295295, 25.3336984),
RE = country_coords("RE", 10.5947968418927, 44.608664),
RO = country_coords("RO", 24.6859225, 45.9852129),
RS = country_coords("RS", 20.55144, 44.1534121),
RU = country_coords("RU", 97.7453061, 64.6863136),
RW = country_coords("RW", 30.0644358, -1.9646631),
SA = country_coords("SA", 13.0464806, 47.7981346),
SB = country_coords("SB", 162.8288542, -9.7354344),
SC = country_coords("SC", 55.4540146, -4.6574977),
SD = country_coords("SD", 29.4917691, 14.5844444),
SE = country_coords("SE", 14.5208584, 59.6749712),
SG = country_coords("SG", 103.8194992, 1.357107),
SH = country_coords("SH", 9.8220089, 54.1853998),
SI = country_coords("SI", 14.4808369, 45.8133113),
SJ = country_coords("SJ", -69.1988222, -30.7054363),
SK = country_coords("SK", 19.4528646, 48.7411522),
SL = country_coords("SL", -11.8400269, 8.6400349),
SM = country_coords("SM", 12.458306, 43.9458623),
SN = country_coords("SN", -14.4529612, 14.4750607),
SO = country_coords("SO", 49.083416, 8.3676771),
SR = country_coords("SR", -56.0771187, 4.1413025),
SS = country_coords("SS", 29.6667897, 7.8699431),
ST = country_coords("ST", 11.4939134, 51.908526),
SV = country_coords("SV", -88.9140683, 13.8000382),
SX = country_coords("SX", -75.6677169724459, 6.1988722),
SY = country_coords("SY", 38.4266844289349, 34.8152564),
SZ = country_coords("SZ", 31.3991317, -26.5624806),
TC = country_coords("TC", -71.6201783, 21.7214683),
TD = country_coords("TD", 19.0156172, 15.6134137),
TF = country_coords("TF", 24.8326676090183, 60.1860107),
TG = country_coords("TG", 1.0199765, 8.7800265),
TH = country_coords("TH", 11.0747905, 50.7333163),
TJ = country_coords("TJ", 70.8156541, 38.6281733),
TK = country_coords("TK", -171.8196878, -9.1676396),
TL = country_coords("TL", 125.8375756, -8.5151979),
TM = country_coords("TM", 59.3924609, 39.3763807),
TN = country_coords("TN", 9.400138, 33.8439408),
TO = country_coords("TO", -175.2026424, -19.9160819),
TR = country_coords("TR", 34.9249653, 38.9597594),
TT = country_coords("TT", -60.9821067, 10.8677845),
TV = country_coords("TV", 178.1167698, -7.768959),
TW = country_coords("TW", 120.9820179, 23.9739374),
TZ = country_coords("TZ", 35.7878438, -6.5247123),
UA = country_coords("UA", 31.2718321, 49.4871968),
UG = country_coords("UG", 32.2166578, 1.5333554),
UM = country_coords("UM", 101.65356103394, 3.12267405),
US = country_coords("US", -100.4458825, 39.7837304),
UY = country_coords("UY", -56.0201525, -32.8755548),
UZ = country_coords("UZ", 63.9528098, 41.32373),
VA = country_coords("VA", 108.4265113, 13.2904027),
VC = country_coords("VC", -61.2765569, 12.90447),
VE = country_coords("VE", -66.1109318, 8.0018709),
VG = country_coords("VG", -64.5661642, 18.4024395),
VI = country_coords("VI", 13.8500268, 46.6167284),
VN = country_coords("VN", 108.4265113, 13.2904027),
VU = country_coords("VU", 168.1069154, -16.5255069),
WF = country_coords("WF", 13.3317901181314, 52.51099155),
WS = country_coords("WS", -172.1200508, -13.7693895),
YE = country_coords("YE", 47.8915271, 16.3471243),
YT = country_coords("YT", -136.002502, 63.000147),
ZA = country_coords("ZA", 24.991639, -28.8166236),
ZM = country_coords("ZM", 27.5599164, -14.5186239),
ZW = country_coords("ZW", 29.7468414, -18.455496)
};

public auto COUNTRIES_COORDS = assumeSorted([
AD, AE, AF, AG, AI, AL, AM, AO, AQ, AR,
AS, AT, AU, AW, AX, AZ, BA, BB, BD, BE,
BF, BG, BH, BI, BJ, BL, BM, BN, BO, BQ,
BR, BS, BT, BV, BW, BY, BZ, CA, CC, CD,
CF, CG, CH, CI, CK, CL, CM, CN, CO, CR,
CU, CV, CW, CX, CY, CZ, DE, DJ, DK, DM,
DO, DZ, EC, EE, EG, EH, ER, ES, ET, FI,
FJ, FK, FM, FO, FR, GA, GB, GD, GE, GF,
GG, GH, GI, GL, GM, GN, GP, GQ, GR, GS,
GT, GU, GW, GY, HK, HM, HN, HR, HT, HU,
ID, IE, IL, IM, IN, IO, IQ, IR, IS, IT,
JE, JM, JO, JP, KE, KG, KH, KI, KM, KN,
KP, KR, KW, KY, KZ, LA, LB, LC, LI, LK,
LR, LS, LT, LU, LV, LY, MA, MC, MD, ME,
MF, MG, MH, MK, ML, MM, MN, MO, MP, MQ,
MR, MS, MT, MU, MV, MW, MX, MY, MZ, NA,
NC, NE, NF, NG, NI, NL, NO, NP, NR, NU,
NZ, OM, PA, PE, PF, PG, PH, PK, PL, PM,
PN, PR, PS, PT, PW, PY, QA, RE, RO, RS,
RU, RW, SA, SB, SC, SD, SE, SG, SH, SI,
SJ, SK, SL, SM, SN, SO, SR, SS, ST, SV,
SX, SY, SZ, TC, TD, TF, TG, TH, TJ, TK,
TL, TM, TN, TO, TR, TT, TV, TW, TZ, UA,
UG, UM, US, UY, UZ, VA, VC, VE, VG, VI,
VN, VU, WF, WS, YE, YT, ZA, ZM, ZW
]);

public country_coords ccBinSearch(string val)
{
    ulong b = 0, u = COUNTRIES_COORDS.length, m;
    --u;
    while (b <= u) {
        m = (b + u) / 2;
        if (COUNTRIES_COORDS[m] == val)
            return COUNTRIES_COORDS[m];
        if (COUNTRIES_COORDS[m] < val)
            b = m + 1;
        else
            u = m - 1;
    }
    return country_coords();
}

unittest
{
    import std.algorithm.searching;
    assert(COUNTRIES_COORDS.contains(IT));
    assert(IT.code == "IT");
    assert(IT == "IT");
    assert("IT" == IT);
    auto de = ccBinSearch("DE");
    assert(de.code == "DE");
}
